(function(){var t;t={},t=function(){function t(t){var e,i;t&&(this.awayTimeout=parseInt(t.awayTimeout,10),this.onAway=t.onAway,this.onAwayBack=t.onAwayBack,this.onVisible=t.onVisible,this.onHidden=t.onHidden),i=this,e=function(){return i.onActive()},window.onclick=e,window.onmousemove=e,window.onmouseenter=e,window.onkeydown=e,window.onscroll=e,this.startAwayTimeout(),document.addEventListener("visibilitychange",function(){return i.handleVisibilityChange()},!1),document.addEventListener("webkitvisibilitychange",function(){return i.handleVisibilityChange()},!1),document.addEventListener("msvisibilitychange",function(){return i.handleVisibilityChange()},!1)}return t.isAway=!1,t.awayTimeout=3e3,t.awayTimestamp=0,t.awayTimer=null,t.onAway=null,t.onAwayBack=null,t.onVisible=null,t.onHidden=null,t.prototype.onActive=function(){return this.awayTimestamp=(new Date).getTime()+this.awayTimeout,this.isAway&&(this.onAwayBack&&this.onAwayBack(),this.startAwayTimeout()),this.isAway=!1,!0},t.prototype.startAwayTimeout=function(){var t;return this.awayTimestamp=(new Date).getTime()+this.awayTimeout,null!==this.awayTimer&&clearTimeout(this.awayTimer),t=this,this.awayTimer=setTimeout(function(){return t.checkAway()},this.awayTimeout+100)},t.prototype.setAwayTimeout=function(t){return this.awayTimeout=parseInt(t,10),this.startAwayTimeout()},t.prototype.checkAway=function(){var t,e;return(e=(new Date).getTime())<this.awayTimestamp?(this.isAway=!1,t=this,void(this.awayTimer=setTimeout(function(){return t.checkAway()},this.awayTimestamp-e+100))):(null!==this.awayTimer&&clearTimeout(this.awayTimer),this.isAway=!0,this.onAway?this.onAway():void 0)},t.prototype.handleVisibilityChange=function(){if(document.hidden||document.msHidden||document.webkitHidden){if(this.onHidden)return this.onHidden()}else if(this.onVisible)return this.onVisible()},t}(),window.Idle=t}).call(this),function(t){function e(t,e){if(!t)throw new Error("Missing selector. Refer to quadrupletech.com");for(var i=0;i<r.length;i++)if(r[i]===t)throw new Error("An instance of Quadruple with this selector already exists.");if(this.options={buttonPreviousClass:"Quadruple-buttonPrevious",buttonNextClass:"Quadruple-buttonNext",itemClass:"Quadruple-item",currentItemClass:"Quadruple-item--current",showPreviousClass:"Quadruple-item--showPrevious",showNextClass:"Quadruple-item--showNext",hidePreviousClass:"Quadruple-item--hidePrevious",hideNextClass:"Quadruple-item--hideNext",carousel:!0},this.whitelist={form:!0},t.length>0&&!this.whitelist[t])throw new Error("Selector cannot be an array, Refer to Usage documentation: https://github.com/peduarte/Quadruple#javascript");this.$selector=t,this.options=a(this.options,e),this.event=null,this.reset(),this.buttonPrevious=this.$selector.querySelector(" ."+this.options.buttonPreviousClass),this.buttonNext=this.$selector.querySelector(" ."+this.options.buttonNextClass),this.bindEvents(),this.createCustomEvent(),-1===this.currentItemIndex&&(this.currentItemIndex=0,n(this.allItemsArray[this.currentItemIndex],this.options.currentItemClass)),this.updateButtonStates();var s=this;setTimeout(function(){s.event.detail.currentItemIndex=s.currentItemIndex,s.$selector.dispatchEvent(s.event)},0)}function i(t,e){if(t)return e||(e=document),e.querySelector("."+t)}function n(t,e){t&&(t.className=(t.className+" "+e).trim())}function s(t,e){t&&(t.className=t.className.replace(e,"").trim())}function a(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n}function u(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}var r=[],o=e.prototype;o.updateButtonStates=function(){!this.buttonPrevious&&!this.buttonNext||this.options.carousel||(this.currentItemIndex===this.lastItemIndex?this.buttonNext.setAttribute("disabled","disabled"):0===this.currentItemIndex&&this.buttonPrevious.setAttribute("disabled","disabled"))},o.removeAllHelperSettings=function(){s(this.allItemsArray[this.currentItemIndex],this.options.currentItemClass),s(i(this.options.hidePreviousClass,this.$selector),this.options.hidePreviousClass),s(i(this.options.hideNextClass,this.$selector),this.options.hideNextClass),s(i(this.options.showPreviousClass,this.$selector),this.options.showPreviousClass),s(i(this.options.showNextClass,this.$selector),this.options.showNextClass),(this.buttonPrevious||this.buttonNext)&&(this.buttonPrevious.removeAttribute("disabled"),this.buttonNext.removeAttribute("disabled"))},o.goTo=function(t){if(t!==this.currentItemIndex&&(t=-1===t&&this.options.carousel?this.lastItemIndex:t,!((t=t===this.lastItemIndex+1&&this.options.carousel?0:t)<0||t>this.lastItemIndex))){this.removeAllHelperSettings();var e=(t>this.currentItemIndex||0===t&&this.currentItemIndex===this.lastItemIndex)&&!(t===this.lastItemIndex&&0===this.currentItemIndex);n(this.allItemsArray[this.currentItemIndex],e?this.options.hidePreviousClass:this.options.hideNextClass),n(this.allItemsArray[t],this.options.currentItemClass+" "+(e?this.options.showNextClass:this.options.showPreviousClass)),this.currentItemIndex=t,this.updateButtonStates(),this.event.detail.currentItemIndex=this.currentItemIndex,this.$selector.dispatchEvent(this.event)}},o.previous=function(){this.goTo(this.currentItemIndex-1)},o.next=function(){this.goTo(this.currentItemIndex+1)},o.reset=function(){this.allItemsArray=Array.prototype.slice.call(this.$selector.querySelectorAll(" ."+this.options.itemClass)),this.currentItemIndex=this.allItemsArray.indexOf(this.$selector.querySelector(" ."+this.options.currentItemClass)),this.lastItemIndex=this.allItemsArray.length-1},o.bindEvents=function(){r.push(this.$selector);var t=this;this.buttonPrevious&&this.buttonPrevious.addEventListener("click",function(e){e.preventDefault(),t.previous()}),this.buttonNext&&this.buttonNext.addEventListener("click",function(e){e.preventDefault(),t.next()})},o.on=function(t,e){this.$selector.addEventListener(t,e,!1)},o.off=function(t,e){this.$selector.removeEventListener(t,e,!1)},o.createCustomEvent=function(){var t=this;this.event=new u("change",{detail:{quadrupleEl:t.$selector,currentItemIndex:Number(t.currentItemIndex)},bubbles:!0,cancelable:!0})},u.prototype=window.CustomEvent?window.CustomEvent.prototype:{},window.CustomEvent=u,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.Quadruple=e}(this),function(){"use strict";function t(t){function e(){if(o.quadState.isQuadVisible&&!o.userIdle&&!o.quadState.wasQuadSent){var t={publisherID:o.publisherID,spaceID:o.spaceID,pathname:o.pathname,pageCounter:o.pageCounter,timeInSeconds:new Date-o.startTime,userID:o.userID,userIP:o.userIP,quadID:o.quadState.quadsList[o.quadState.currentVisibleQuadIndex].id,quadUID:o.quadState.quadsList[o.quadState.currentVisibleQuadIndex].u_uid,quadPosition:o.quadState.currentVisibleQuadIndex+1,quadIteration:o.quadState.currentQuadsIteration,isUnique:-1===o.quadState.sentQuadIDs.indexOf(o.quadState.quadsList[o.quadState.currentVisibleQuadIndex].id)},e=JSON.stringify(t);console.log(t),a("https://www.quadrupletech.com/receiver/data-receiver.php","POST",e,function(){o.quadState.wasQuadSent=!0;-1===o.quadState.sentQuadIDs.indexOf(o.quadState.quadsList[o.quadState.currentVisibleQuadIndex].id)&&o.quadState.sentQuadIDs.push(o.quadState.quadsList[o.quadState.currentVisibleQuadIndex].id)},function(){},"data")}}function i(t){var e={publisherID:o.publisherID,spaceID:o.spaceID,pathname:o.pathname,pageCounter:o.pageCounter,timeInSeconds:new Date-o.startTime,userID:o.userID,userIP:o.userIP,quadID:o.quadState.quadsList[o.quadState.currentVisibleQuadIndex].id,quadUID:o.quadState.quadsList[o.quadState.currentVisibleQuadIndex].u_uid,quadPosition:o.quadState.currentVisibleQuadIndex+1,quadIteration:o.quadState.currentQuadsIteration};a("https://www.quadrupletech.com/receiver/click-receiver.php","POST",JSON.stringify(e),function(){},function(){})}o.startTime=new Date,function(){for(var t=document.getElementsByClassName("Quadruple-link"),e=0;e<t.length;e++)t[e].addEventListener("click",function(t){i()})}(),function(){var i=new Quadruple(t);n(o.quadState.quadTimer,function(){i.next()}),i.on("change",function(t){o.isRequestInProcess=!1,0===t.detail.currentItemIndex&&o.quadState.currentQuadsIteration++,o.quadState.wasQuadSent=!1,o.quadState.currentVisibleQuadIndex=t.detail.currentItemIndex,e()})}(),new Idle({onHidden:function(){o.userIdle=!0},onVisible:function(){o.userIdle=!1,e()},onAway:function(){o.userIdle=!0},onAwayBack:function(){o.userIdle=!1,e()},awayTimeout:o.quadState.userInactivityTimer}),o.quadState.quadVisibilityPercent?o.quadState.isQuadVisible=s(o.spaceID)>o.quadState.quadVisibilityPercent:o.quadState.isQuadVisible=!0,window.addEventListener("scroll",function(t){o.quadState.quadVisibilityPercent&&(o.quadState?o.quadState.isQuadVisible=s(o.spaceID)>o.quadState.quadVisibilityPercent:o.quadState.isQuadVisible=!0)})}function e(t){var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$";e+=(new Date).getTime();var n=o.publisherID.toString(),s=5-n;s>0&&(n=Array(s+1).join("0")+n),e+=n;for(var a=0;a<14;a++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function i(t){function e(t,e,i){var n=document.createElement("img");return n.setAttribute("class","Quadruple-image"),n.src=t,e&&(n.alt=e),i&&(n.title=i),n}return function(t){var i=document.createElement("div");i.setAttribute("class","Quadruple-list");for(var n=0;n<t.length;n++){var s=document.createElement("div");s.setAttribute("class","Quadruple-item");var a=document.createElement("a");a.title="Quad unit",a.href=t[n].url,a.target="_blank",a.setAttribute("class","Quadruple-link"),a.appendChild(e(t[n].url)),s.appendChild(a),i.appendChild(s)}return i}(t)}function n(t,e){setInterval(function(){e()},t)}function s(t){var e=[window.pageYOffset,window.innerHeight+window.pageYOffset],i=[(t=document.getElementById(t)).offsetTop,t.offsetTop+t.clientHeight],n=[Math.max(e[0],i[0]),Math.min(e[1],i[1])];return(n[1]-n[0])/(i[1]-i[0])*100}function a(t,e,i,n,s,a){if("data"===a){if(o.isRequestInProcess)return;o.isRequestInProcess=!0}var u=new XMLHttpRequest;u.open(e,t,!0),u.setRequestHeader("Content-type","application/json;charset=UTF-8"),u.onreadystatechange=function(){4==u.readyState&&200==u.status?n(u.responseText):s(),"data"===a&&(o.isRequestInProcess=!1)},u.send(i)}function u(t,e,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var s="expires="+n.toUTCString();document.cookie=t+"="+e+";"+s+";path=/"}function r(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return""}var o={publisherID:1,spaceID:"quad_units",startTime:null,userID:-1,userIP:null,userIdle:!1,pathname:null,isRequestInProcess:!1,quadState:{quadsList:[],quadTimer:0,userInactivityTimer:0,quadVisibilityPercent:20,sentQuadIDs:[],isQuadVisible:null,currentVisibleQuadIndex:-1,currentQuadsIteration:0,wasQuadSent:!1}};!function(t){r("userID")?o.userID=r("userID"):(o.userID=e(),u("userID",o.userID,99999)),r("pageCounter")?(u("pageCounter",parseInt(r("pageCounter"))+1),o.pageCounter=r("pageCounter")):(u("pageCounter",1),o.pageCounter=1),o.pathname=window.location.pathname,o.userIP=myip;var i={publisherID:o.publisherID,spaceID:o.spaceID,userID:o.userID,pathname:o.pathname,pageCounter:o.pageCounter,userIP:o.userIP};a("https://www.quadrupletech.com/receiver/adinfo.php","POST",JSON.stringify(i),function(e){var i=JSON.parse(e),n=i.ad_data,s=i.ad_change_time?Number(i.ad_change_time):5e3,a=i.user_inactivity?Number(i.user_inactivity):1e3,u=i.visibility?Number(i.visibility):20;o.quadState.quadsList=n,o.quadState.quadTimer=s,o.quadState.userInactivityTimer=a,o.quadState.quadVisibilityPercent=u,t()},function(){})}(function(){function e(e){d++,s(o.quadState.quadsList[e].id,o.quadState.quadsList[e].u_uid,!0),d===r.length&&t(u)}function n(e){d++,s(o.quadState.quadsList[e].id,o.quadState.quadsList[e].u_uid,!1),d===r.length&&t(u)}function s(t,e,i){function i(){}var n={publisherID:o.publisherID,spaceID:o.spaceID,userID:o.userID,userIP:o.userIP,pathname:o.pathname,quadID:t,quadUID:e,renderSuccess:i};a("https://www.quadrupletech.com/receiver/image-receiver.php","POST",JSON.stringify(n),i,function(){})}var u=document.getElementById(o.spaceID);u.setAttribute("class","Quadruple"),u.appendChild(i(o.quadState.quadsList));for(var r=document.getElementsByClassName("Quadruple-image"),d=0,c=0;c<r.length;c++)!function(t){r[t].onload=e(t),r[t].onerror=n(t)}(c)})}();